/**!
 * lg-zoom.js | 0.0.1 | August 1st 2016
 * http://sachinchoolur.github.io/lg-zoom.js
 * Copyright (c) 2016 Sachin N; 
 * @license Apache 2.0 
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.LgZoom=e()}}(function(){var e,t,o;return function e(t,o,r){function i(a,n){if(!o[a]){if(!t[a]){var s="function"==typeof require&&require;if(!n&&s)return s(a,!0);if(l)return l(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){var o=t[a][1][e];return i(o?o:e)},u,u.exports,e,t,o,r)}return o[a].exports}for(var l="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,o,r){!function(t,o){if("function"==typeof e&&e.amd)e([],o);else if("undefined"!=typeof r)o();else{var i={exports:{}};o(),t.lgZoom=i.exports}}(this,function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},t={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300},o=function o(r){return this.el=r,this.core=window.lgData[this.el.getAttribute("lg-uid")],this.core.s=e({},t,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+document.documentElement.scrollTop||document.body.scrollTop),this};o.prototype.init=function(){var e=this,t='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';e.core.s.actualSize&&(t+='<span id="lg-actual-size" class="lg-icon"></span>'),this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend",t),utils.on(e.core.el,"onSlideItemLoad.lgtmzoom",function(t){var o=e.core.s.enableZoomAfter+t.detail.delay;utils.hasClass(document.body,"lg-from-hash")&&t.detail.delay?o=0:utils.removeClass(document.body,"lg-from-hash"),e.zoomabletimeout=setTimeout(function(){utils.addClass(e.core.___slide[t.detail.index],"lg-zoomable")},o+30)});var o=1,r=function t(o){var r=e.core.outer.querySelector(".lg-current .lg-image"),i,l,a=(window.innerWidth-r.clientWidth)/2,n=(window.innerHeight-r.clientHeight)/2+document.documentElement.scrollTop||document.body.scrollTop;i=e.pageX-a,l=e.pageY-n;var s=(o-1)*i,c=(o-1)*l;utils.setVendor(r,"Transform","scale3d("+o+", "+o+", 1)"),r.setAttribute("data-scale",o),r.parentElement.style.left=-s+"px",r.parentElement.style.top=-c+"px",r.parentElement.setAttribute("data-x",s),r.parentElement.setAttribute("data-y",c)},i=function t(){o>1?utils.addClass(e.core.outer,"lg-zoomed"):e.resetZoom(),o<1&&(o=1),r(o)},l=function t(r,l,a,n){var s=l.clientWidth,c;c=e.core.s.dynamic?e.core.s.dynamicEl[a].width||l.naturalWidth||s:e.core.items[a].getAttribute("data-width")||l.naturalWidth||s;var u;utils.hasClass(e.core.outer,"lg-zoomed")?o=1:c>s&&(u=c/s,o=u||2),n?(e.pageX=window.innerWidth/2,e.pageY=window.innerHeight/2+document.documentElement.scrollTop||document.body.scrollTop):(e.pageX=r.pageX||r.originalEvent.targetTouches[0].pageX,e.pageY=r.pageY||r.originalEvent.targetTouches[0].pageY),i(),setTimeout(function(){utils.removeClass(e.core.outer,"lg-grabbing"),utils.addClass(e.core.outer,"lg-grab")},10)},a=!1;utils.on(e.core.el,"onAferAppendSlide.lgtmzoom",function(t){var o=t.detail.index,r=e.core.___slide[o].querySelector(".lg-image");utils.on(r,"dblclick",function(e){l(e,r,o)}),utils.on(r,"touchstart",function(e){a?(clearTimeout(a),a=null,l(e,r,o)):a=setTimeout(function(){a=null},300),e.preventDefault()})}),utils.on(window,"resize.lgzoom scroll.lgzoom orientationchange.lgzoom",function(){e.pageX=window.innerWidth/2,e.pageY=window.innerHeight/2+document.documentElement.scrollTop||document.body.scrollTop,r(o)}),utils.on(document.getElementById("lg-zoom-out"),"click.lg",function(){e.core.outer.querySelector(".lg-current .lg-image")&&(o-=e.core.s.scale,i())}),utils.on(document.getElementById("lg-zoom-in"),"click.lg",function(){e.core.outer.querySelector(".lg-current .lg-image")&&(o+=e.core.s.scale,i())}),utils.on(document.getElementById("lg-actual-size"),"click.lg",function(t){l(t,e.core.___slide[e.core.index].querySelector(".lg-image"),e.core.index,!0)}),utils.on(e.core.el,"onBeforeSlide.lgtm",function(){o=1,e.resetZoom()}),e.core.isTouch||e.zoomDrag(),e.core.isTouch&&e.zoomSwipe()},o.prototype.resetZoom=function(){utils.removeClass(this.core.outer,"lg-zoomed");for(var e=0;e<this.core.___slide.length;e++)this.core.___slide[e].querySelector(".lg-img-wrap")&&(this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("style"),this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-x"),this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-y"));for(var t=0;t<this.core.___slide.length;t++)this.core.___slide[t].querySelector(".lg-image")&&(this.core.___slide[t].querySelector(".lg-image").removeAttribute("style"),this.core.___slide[t].querySelector(".lg-image").removeAttribute("data-scale"));this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+document.documentElement.scrollTop||document.body.scrollTop},o.prototype.zoomSwipe=function(){for(var e=this,t={},o={},r=!1,i=!1,l=!1,a=0;a<e.core.___slide.length;a++)utils.on(e.core.___slide[a],"touchstart.lg",function(o){if(utils.hasClass(e.core.outer,"lg-zoomed")){var r=e.core.___slide[e.core.index].querySelector(".lg-object");l=r.offsetHeight*r.getAttribute("data-scale")>e.core.outer.querySelector(".lg").clientHeight,i=r.offsetWidth*r.getAttribute("data-scale")>e.core.outer.querySelector(".lg").clientWidth,(i||l)&&(o.preventDefault(),t={x:o.originalEvent.targetTouches[0].pageX,y:o.originalEvent.targetTouches[0].pageY})}});for(var n=0;n<e.core.___slide.length;n++)utils.on(e.core.___slide[n],"touchmove.lg",function(a){if(e.core.outer.hasClass("lg-zoomed")){var n=e.core.___slide[e.core.index].querySelector(".lg-img-wrap"),s,c;a.preventDefault(),r=!0,o={x:a.originalEvent.targetTouches[0].pageX,y:a.originalEvent.targetTouches[0].pageY},utils.addClass(e.core.outer,"lg-zoom-dragging"),c=l?-Math.abs(n.getAttribute("data-y"))+(o.y-t.y):-Math.abs(n.getAttribute("data-y")),s=i?-Math.abs(n.getAttribute("data-x"))+(o.x-t.x):-Math.abs(n.getAttribute("data-x")),(Math.abs(o.x-t.x)>15||Math.abs(o.y-t.y)>15)&&(n.style.left=s+"px",n.style.top=c+"px")}});for(var s=0;s<e.core.___slide.length;s++)utils.on(e.core.___slide[s],"touchend.lg",function(){utils.hasClass(e.core.outer,"lg-zoomed")&&r&&(r=!1,utils.removeClass(e.core.outer,"lg-zoom-dragging"),e.touchendZoom(t,o,i,l))})},o.prototype.zoomDrag=function(){for(var e=this,t={},o={},r=!1,i=!1,l=!1,a=!1,n=0;n<e.core.___slide.length;n++)utils.on(e.core.___slide[n],"mousedown.lgzoom",function(o){var i=e.core.___slide[e.core.index].querySelector(".lg-object");a=i.offsetHeight*i.getAttribute("data-scale")>e.core.outer.querySelector(".lg").clientHeight,l=i.offsetWidth*i.getAttribute("data-scale")>e.core.outer.querySelector(".lg").clientWidth,utils.hasClass(e.core.outer,"lg-zoomed")&&utils.hasClass(o.target,"lg-object")&&(l||a)&&(o.preventDefault(),t={x:o.pageX,y:o.pageY},r=!0,e.core.outer.scrollLeft+=1,e.core.outer.scrollLeft-=1,utils.removeClass(e.core.outer,"lg-grab"),utils.addClass(e.core.outer,"lg-grabbing"))});utils.on(window,"mousemove.lgzoom",function(n){if(r){var s=e.core.___slide[e.core.index].querySelector(".lg-img-wrap"),c,u;i=!0,o={x:n.pageX,y:n.pageY},utils.addClass(e.core.outer,"lg-zoom-dragging"),u=a?-Math.abs(s.getAttribute("data-y"))+(o.y-t.y):-Math.abs(s.getAttribute("data-y")),c=l?-Math.abs(s.getAttribute("data-x"))+(o.x-t.x):-Math.abs(s.getAttribute("data-x")),s.style.left=c+"px",s.style.top=u+"px"}}),utils.on(window,"mouseup.lgzoom",function(n){r&&(r=!1,utils.removeClass(e.core.outer,"lg-zoom-dragging"),!i||t.x===o.x&&t.y===o.y||(o={x:n.pageX,y:n.pageY},e.touchendZoom(t,o,l,a)),i=!1),utils.removeClass(e.core.outer,"lg-grabbing"),utils.addClass(e.core.outer,"lg-grab")})},o.prototype.touchendZoom=function(e,t,o,r){var i=this,l=i.core.___slide[i.core.index].querySelector(".lg-img-wrap"),a=i.core.___slide[i.core.index].querySelector(".lg-object"),n=-Math.abs(l.getAttribute("data-x"))+(t.x-e.x),s=-Math.abs(l.getAttribute("data-y"))+(t.y-e.y),c=(i.core.outer.querySelector(".lg").clientHeight-a.offsetHeight)/2,u=Math.abs(a.offsetHeight*Math.abs(a.getAttribute("data-scale"))-i.core.outer.querySelector(".lg").clientHeight+c),g=(i.core.outer.querySelector(".lg").clientWidth-a.offsetWidth)/2,d=Math.abs(a.offsetWidth*Math.abs(a.getAttribute("data-scale"))-i.core.outer.querySelector(".lg").clientWidth+g);(Math.abs(t.x-e.x)>15||Math.abs(t.y-e.y)>15)&&(r&&(s<=-u?s=-u:s>=-c&&(s=-c)),o&&(n<=-d?n=-d:n>=-g&&(n=-g)),r?l.setAttribute("data-y",Math.abs(s)):s=-Math.abs(l.getAttribute("data-y")),o?l.setAttribute("data-x",Math.abs(n)):n=-Math.abs(l.getAttribute("data-x")),l.style.left=n+"px",l.style.top=s+"px")},o.prototype.destroy=function(){var e=this;utils.off(e.core.el,".lgzoom"),utils.off(window,".lgzoom");for(var t=0;t<e.core.___slide.length;t++)utils.off(e.core.___slide[t],".lgzoom");utils.off(e.core.el,".lgtmzoom"),e.resetZoom(),clearTimeout(e.zoomabletimeout),e.zoomabletimeout=!1},window.lgModules.zoom=o})},{}]},{},[1])(1)});